<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Grantsville Community Action</title>
  <style>
    body { font-family: Arial, sans-serif; margin: 0; padding: 0; line-height: 1.6; }
    header { background: #333; color: #fff; padding: 1rem; text-align: center; }
    main { padding: 1.5rem; max-width: 800px; margin: auto; }
    h1, h2, h3 { margin-top: 1.2rem; }
    .update { margin: 1.5rem 0; padding: 1rem 0; border-top: 1px solid #ccc; }
    .financial-summary { width: 100%; border-collapse: collapse; margin: 0.75rem 0; }
    .financial-summary th, .financial-summary td { border: 1px solid #ccc; padding: 0.5rem; text-align: left; }
    .financial-summary thead th { background: #f6f6f6; }
    .editable { background: #f1f1f1; padding: 0.05rem 0.25rem; border-radius: 4px; outline: none; }
    .muted { color: #555; font-size: 0.85em; }
    #last-updated { margin-top: 0.5rem; font-size: 0.85em; color: #444; }
    footer { background: #f4f4f4; padding: 1rem; text-align: center; margin-top: 2rem; }
  </style>
</head>
<body>
  <header>
    <h1>Grantsville Community Action</h1>
    <p>Standing together against government overreach</p>
  </header>

  <main>
    <section>
      <h2>Contact</h2>
      <p>Name: Kevin Casey</p>
      <p>Email: GVCP</p>
    </section>

    <section>
      <h2>Updates / News</h2>

      <!-- Oct 4 Community Meeting -->
      <article class="update">
        <h3>Open Community Meeting — Oct 4, 2025</h3>
        <p>
          Join us at the Grantsville City Library, Large Meeting Room, on
          <strong>Saturday, October 4</strong> for an open community meeting.
          We’ll provide updates, host Q&amp;A, and take signups and donations.
        </p>
      </article>

      <!-- Financial Status Update -->
      <article class="update" aria-labelledby="fin-status">
        <h3 id="fin-status">Financial Status Update — Oct 3, 2025</h3>
        <p>Thank you to everyone contributing to the effort. Here’s where the war chest stands today:</p>

        <table class="financial-summary" role="table" aria-label="Financial Summary">
          <thead>
            <tr>
              <th scope="col">Metric</th>
              <th scope="col">Amount</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td>Total Contributions to Date</td>
              <td>
                <span id="contrib" class="editable" contenteditable="true" aria-label="Total Contributions">$8,625.00</span>
                <div class="muted">Edit this value only</div>
              </td>
            </tr>
            <tr>
              <td>Total Expenses to Date</td>
              <td>
                <span id="expenses" class="editable" contenteditable="true" aria-label="Total Expenses">$7,907.71</span>
                <div class="muted">Edit this value only</div>
              </td>
            </tr>
            <tr>
              <td><strong>Balance in War Chest</strong></td>
              <td><strong id="balance">—</strong></td>
            </tr>
            <tr>
              <td>Initial Goal</td>
              <td id="goal">$20,000.00</td>
            </tr>
            <tr>
              <td>Remaining to Goal <span class="muted">(vs. contributions)</span></td>
              <td id="remain">—</td>
            </tr>
          </tbody>
        </table>

        <p>
          We’re still a long way from the initial war chest goal of <strong>$20,000</strong>.
          If, after the completion of this action, there is any positive balance, it will either be
          returned to contributors proportional to their contribution, <em>or</em> allocated to another
          worthy cause or action by a majority vote.
        </p>

        <div id="last-updated">Last Updated: —</div>
      </article>

      <!-- Oct 2 Update -->
      <article class="update">
        <h3>Update — Oct 2, 2025</h3>
        <p>
          Our community continues to organize against the city’s recent overreach.
          Stay tuned here for updates and ways to get involved.
        </p>
      </article>

    </section>
  </main>

  <footer>
    <p>&copy; 2025 Grantsville Community Action</p>
  </footer>

  <script>
    (function () {
      const $ = (id) => document.getElementById(id);

      function parseCurrency(str) {
        if (!str) return 0;
        const cleaned = (str + '').replace(/[^0-9.\-]/g, '');
        const n = parseFloat(cleaned);
        return isNaN(n) ? 0 : n;
      }

      function formatCurrency(n) {
        return n.toLocaleString('en-US', { style: 'currency', currency: 'USD' });
      }

      function setUpdated() {
        const now = new Date();
        const stamp = now.toLocaleString('en-US', {
          dateStyle: 'medium',
          timeStyle: 'short'
        });
        $('last-updated').innerText = 'Last Updated: ' + stamp;
      }

      function recalc() {
        const contribVal = parseCurrency($('contrib').innerText);
        const expenseVal = parseCurrency($('expenses').innerText);
        const goalVal = parseCurrency($('goal').innerText);

        const balance = contribVal - expenseVal;
        const remainVsContrib = Math.max(goalVal - contribVal, 0);

        $('balance').innerText = formatCurrency(balance);
        $('remain').innerText  = formatCurrency(remainVsContrib);
      }

      // Initialize
      document.addEventListener('DOMContentLoaded', () => {
        recalc();
        setUpdated();
      });

      ['contrib', 'expenses'].forEach(id => {
        const el = $(id);

        el.addEventListener('input', () => { recalc(); setUpdated(); });

        el.addEventListener('blur', () => {
          el.innerText = formatCurrency(parseCurrency(el.innerText));
          recalc();
          setUpdated();
        });

        el.addEventListener('keydown', (e) => {
          if (e.key === 'Enter') { e.preventDefault(); el.blur(); }
        });

        el.addEventListener('paste', (e) => {
          e.preventDefault();
          const text = (e.clipboardData || window.clipboardData).getData('text');
          const val = formatCurrency(parseCurrency(text));
          document.execCommand('insertText', false, val);
          recalc();
          setUpdated();
        });
      });
    })();
  </script>
</body>
</html>
